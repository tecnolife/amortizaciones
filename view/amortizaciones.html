{include="header"}

<div class="container-fluid">
   <div class="row">
      <div class="col-sm-12">
         <div class="page-header">
            <h1>
               <span class="glyphicon glyphicon-piggy-bank" aria-hidden="true"></span>
               Amortizaciones
               <a class="btn btn-xs btn-default" href="index.php?page=amortizaciones" title="Recargar la página">
                  <span class="glyphicon glyphicon-refresh"></span>
               </a>
            </h1>
         </div>
      </div>
   </div>

   <div>

      <!-- Cabezeras de las pestañas -->
      <ul class="nav nav-tabs" role="tablist">
         <li role="presentation" class="active">
            <a href="#todas" aria-controls="todas" role="tab" data-toggle="tab">
               Todas
            </a>
         </li>
         <li role="presentation">
            <a href="#pendientes" aria-controls="pendientes" role="tab" data-toggle="tab">
               Pendientes
            </a>
         </li>
      </ul>

      <!-- Conetenido de las pestañas -->
      <div class="tab-content">
         <div role="tabpanel" class="tab-pane active" id="todas">
            <div class="table-responsive">
               <table class="table table-hover">
                  <thead>
                     <tr>
                        <th>Artículo</th>
                        <th width="150" class="text-right">Tipo</th>
                        <th width="150" class="text-right">Amortizable</th>
                        <th width="150" class="text-right">Valor Residual</th>
                        <th width="150" class="text-right">Años</th>
                        <th width="150" class="text-right">Fecha Inicio</th>
                        <th width="150" class="text-right">Fecha Fin</th>
                        <th width="150" class="text-right">Estado</th>
                     </tr>
                  </thead>
                  <tbody>
                     {loop="$fsc->listado"}
                     <tr class='clickableRow{if="$value->estado == 'completada'"} success{elseif="$value->estado == 'vendida'"} info{elseif="$value->estado == 'anulada'"} danger{/if}'
                        href="index.php?page=editar_amortizacion&id={$value->id_amortizacion}">
                        <td>
                           <div>{$value->descripcion}</div>
                        </td>
                        <td>
                           <div class="text-right">{$value->tipo}</div>
                        </td>
                        <td>
                           <div class="text-right">{$fsc->show_precio($value->valor)}</div>
                        </td>
                        <td>
                           <div class="text-right">{$fsc->show_precio($value->residual)}</div>
                        </td>
                        <td>
                           <div class="text-right">{$value->periodos}</div>
                        </td>
                        <td>
                           <div class="text-right">{$value->fecha_inicio}</div>
                        </td>
                        <td>
                           <div class="text-right">{$value->fecha_fin}</div>
                        </td>
                        <td>
                           <div class="text-right">{$value->estado}</div>
                        </td>
                     </tr>
                     {/loop}
                  </tbody>
               </table>
            </div>
            
            <!--Mejorar la paginación-->
            <nav aria-label="...">
               <ul class="pager">
                  {if condition="$fsc->offset != 0"}
                  <li class="previous"><a href="index.php?page=amortizaciones&offset={$fsc->offset - $fsc->limite}"><span aria-hidden="true">&larr;</span> Anterior</a></li>
                  {/if}
                  {if condition="!empty($fsc->listado)"}
                  <li class="next"><a href="index.php?page=amortizaciones&offset={$fsc->offset + $fsc->limite}">Siguiente <span aria-hidden="true">&rarr;</span></a></li>
                  {/if}
               </ul>
            </nav>
         
         </div>
         
         <div role="tabpanel" class="tab-pane" id="pendientes">
            <div class="table-responsive">
               <table class="table table-hover">
                  <thead>
                     <tr>
                        <th width="150">Año</th>
                        <th>Artículo</th>
                        <th width="150" class="text-right">Cantidad a amortizar</th>
                     </tr>
                  </thead>
                  <tbody>
                     {loop="$fsc->listado_pendientes"}
                     <tr class="clickableRow" href="index.php?page=editar_amortizacion&id={$value[id_amortizacion]}">
                        <td>
                           <div>{$value[ano]}</div>
                        </td>
                        <td>
                           <div>{$value[descripcion]}</div>
                        </td>
                        <td>
                           <div class="text-right">{$fsc->show_precio($value[cantidad])}</div>
                        </td>
                     </tr>
                     {/loop}
                  </tbody>
               </table>
               
            </div>
         </div>
         
      </div>
   </div>
</div>

{include="footer"}